---
title: 微信小程序混入
date: 2018-12-10
categories:
  -  微信小程序
tags:
  -  微信小程序
---
## 混入
- 用法和vue-mixis几乎一样，给component自定义组件使用
- 语法：Behavior
- 在 component 基础上扩展的外部实例，最后合并到 component 组件里；

## wxs
### 用在wxml中，增强page功能
- wxs是小程序的内置的一种语言，
- 对 page 页面的扩展，它可以作为.wxs 文件引入到 wxml 文件中；
也可以直接写在 wxml 文件里

## 小程序的一些题

1. 请谈谈微信小程序作用？
•	project.config.json 项目配置文件，用得最多的就是配置是否开启https校验；
•	App.js 设置一些全局的基础数据等；
•	App.json 底部tab, 标题栏和路由等设置；
•	App.wxss 公共样式，引入iconfont等；
•	pages 里面包含一个个具体的页面；
•	index.json (配置当前页面标题和引入组件等)；
•	index.wxml (页面结构)；
•	index.wxss (页面样式表)；
•	index.js (页面的逻辑，请求和数据处理等)；
2. 简单描述下微信小程序的相关文件类型？
-	wxml 模板文件，是框架设计的一套标签语言，结合基础组件、事件系统、可以构建出页面的结构
-	wxss 样式文件，是一套样式语言，用于描述WXML的组件样式
-	js 脚本逻辑文件，逻辑处理网络请求
-	json 配置文件，小程序设置，如页面注册，页面标题及tabBar
-	app.json 整个小程序的全局配置，包括：
o	pages:[ 所有页面路径 ]
o	网络设置（网络超时时间）
o	界面表现（页面注册）
o	window:{背景色、导航样式、默认标题}
o	底部tab等
-	app.js 监听并处理小程序的生命周期函数、声明全局变量
-	app.wxss 全局配置的样式文件

3. 请谈谈wxml与标准的html的异同？
•	都是用来描述页面的结构；
•	都由标签、属性等构成；
•	标签名字不一样，且小程序标签更少，单一标签更多；
•	多了一些 wx:if 这样的属性以及 {{ }} 这样的表达式
•	WXML仅能在微信小程序开发者工具中预览，而HTML可以在浏览器内预览
•	组件封装不同， WXML对组件进行了重新封装，
•	小程序运行在JS Core内，没有DOM树和window对象，小程序中无法使用window对象和document对象。
4. 请谈谈WXSS和CSS的异同？
•	都是用来描述页面的样子；
•	WXSS 具有 CSS 大部分的特性，也做了一些扩充和修改；
•	WXSS新增了尺寸单位，WXSS 在底层支持新的尺寸单位 rpx；
•	WXSS 仅支持部分 CSS 选择器；
•	WXSS 提供全局样式与局部样式
•	WXSS 不支持window和dom 文档流
5. 你是怎么封装微信小程序的数据请求的？
-	将所有的接口放在统一的js文件中并导出
-	在app.js中创建封装请求数据的方法
-	在子页面中调用封装的请求数据
或
-	在根目录下创建utils目录及api.js文件和apiConfig.js文件；
-	在appConfig.js封装基础的get\post\put\upload等请求方法，设置请求体，带上token和异常处理等；
-	在api.js中引入apiConfig.js封装好的请求方法，根据页面数据请求的urls，设置对应的方法并导出；
-	在具体页面导入；

6. 小程序页面间有哪些传递数据的方法？
-	给html元素添加data-*属性来传递值，然后通过e.currentTarget.dataset或onload的param参数获取。注：data-名称不能有大写字母、不可以存放对象
-	设置id的方法标识来传值，通过e.currentTarget.id获取设置的id的值，然后通过设置全局对象的方式来传递数值
-	在navigator中添加参数数值
或
-	使用全局变量实现数据传递
-	页面跳转或重定向时，使用url带参数传递数据
-	使用组件模板template传递参数
-	使用缓存传递参数
-	使用数据库传递参数
7. 请谈谈小程序的双向绑定和vue的异同？
•	大体相同，但小程序直接this.data的属性是不可以同步到视图的，必须调用this.setData()方法！
•	1.双向绑定：vue默认支持双向绑定，微信小程序需要借助data。
•	2.取值：vue中，通过this.reason取值。小程序中，通过this.data.reason取值。
•	3.定义方法：小程序使用 在app.js中定义即可，vue的方法通过写在method中进行定义。
•	1. 遍历变量的时候：
•	   - 小程序  wx:for = "lists"
•	   - Vue是  v-for = "item in lists"
•	2. 调用data模型（赋值）的时候：
•	   - 小程序：this.data.item //调用  this.setData({item:1}) //赋值
•	   - vue: this.item //调用  this.item =1 //赋值
•	小程序的双向绑定实际上并不是双向绑定 如果在小程序.js文件中改变了某个变量的值 那么页面上的值并不会跟着改变 如果想要页面上的值也跟着改变的话 需要通过setData来操作 而Vue默认就是双向绑定 只改变了某个变量的值 页面上也会跟着改变 


8. 请谈谈小程序的生命周期函数？
•	onLoad() 页面加载时触发，只会调用一次，可获取当前页面路径中的参数。
•	onShow() 页面显示/切入前台时触发，一般用来发送数据请求；
•	onReady() 页面初次渲染完成时触发, 只会调用一次，代表页面已可和视图层进行交互。
•	onHide() 页面隐藏/切入后台时触发, 如底部 tab 切换到其他页面或小程序切入后台等。
•	onUnload() 页面卸载时触发，如redirectTo或navigateBack到其他页面时。
•	onPullDownRefresh() 下拉刷新的钩子函数 用户下拉刷新时会自动走到这个函数中
•	onReachBottom() 上翻到底的钩子函数
9. 简述微信小程序原理？
•	小程序本质就是一个单页面应用，所有的页面渲染和事件处理，都在一个页面内进行，但又可以通过微信客户端调用原生的各种接口；
•	它的架构，是数据驱动的架构模式，它的UI和数据是分离的，所有的页面更新，都需要通过对数据的更改来实现；
•	它从技术讲和现有的前端开发差不多，采用JavaScript、WXML、WXSS三种技术进行开发；
•	功能可分为webview和appService两个部分；
•	webview用来展现UI，appService有来处理业务逻辑、数据及接口调用；
•	两个部分在两个进程中运行，通过系统层JSBridge实现通信，实现UI的渲染、事件的处理等。
或
- 	微信小程序采用JavaScript、wxml、wxss三种技术进行开发，与现有前端开发的区别：
o	JavaScript的代码是运行在微信APP中的，因此一些h5技术的应用需要微信APP提供对应的API支持；
o	wxml微信自己基于xml语法开发的，因此在开发时只能使用微信提供的现有标签，html的标签是无法使用的；
o	wxss具有css的大部分特性，但并不是所有都支持没有详细文档（wxss的图片引入需使用外链地址，没有body，样式可直接使用import导入）。
o	微信的架构，是数据驱动的架构模式，它的UI和数据是分离的，所有的页面更新，都需要通过对数据的更改来实现。
o	小程序功能分为webview和APPservice，webview主要用来展示UI，appservice用来处理业务逻辑、数据及接口调用。它们在两个进程中进行，通过系统层JSBridge实现通信，实现UI的渲染、事件处理。
10. 请谈谈原生开发小程序、wepy、mpvue 的对比？
•	个人认为，如果是新项目，且没有旧的 h5 项目迁移，则考虑用小程序原生开发，好处是相比于第三方框架，坑少。
•	而如果有 老的 h5 项目是 vue 开发 或者 也有 h5 项目也需要小程序开发，则比较适合 wepy 或者 mpvue 来做迁移或者开发，近期看wepy几乎不更新了，所以推荐美团的mpvue。
•	而如果如果团队前端强大，自己做一套框架也没问题。
11. 哪些方法来提高微信小程序的应用速度？
-	提高页面的加载速度
-	用户行为预测 # 什么叫行为预测
-	减少默认data的大小
-	组件化方案 # 使用
12. 分析微信小程序的优劣势？
•	优势：
-	容易上手，基础组件库比较全，基本上不需要考虑兼容问题；
-	开发文档比较完善，开发社区比较活跃，支持插件式开发；
-	良好的用户体验：无需下载，通过搜索和扫一扫就可以打开，打开速度快，安卓上可以添加到桌面，与原生APP差不多；
-	开发成本比APP要低；
-	为用户提供良好的安全保障（小程序发布 严格的审查流程）
•	劣势：
-	限制较多，页面大小不能超过1M，不能打开超过5个层级的页面；
-	样式单一，部分组件已经是成型了的，样式不可修改，例如：幻灯片、导航
-	推广面窄，不能分享朋友圈，只能通过分享给朋友，附近小程序推广
-	依托于微信，无法开发后台管理功能
-	后台调试麻烦，因为api接口必须https请求且公网地址
-	真机测试，个别功能安卓和苹果表现迥异，例如安卓的定位功能加载很慢
13. 小程序关联微信公众号如何确定用户的唯一性？
使用wx.getUserInfo方法 withCredentials为true时，可获取encryptedData，里面有union_id.后端需要进行对称解密。
14. 使用webview（网页容器）直接加载要注意哪些事项？
-	必须要在小程序后台使用管理员添加业务域名；
-	h5页面跳转至小程序的脚步必须是1.3.1以上；
-	微信分享只可以是小程序的主名称，如要自定义分享内容，需小程序版本在1.7.1以上；
-	h5的支付不可以是微信公众号的appid，必须是小程序的appid，而且用户的openid也必须是用户和小程序的
15. 小程序调用后台接口遇到哪些问题？
-	数据的大小限制，超过范围会直接导致整个小程序崩溃，除非重启小程序；
-	小程序不可以直接渲染文章内容这类型的html文本，显示需借助插件
注：插件渲染会导致页面加载变慢，建议在后台对文章内容的html进行过滤，后台直接处理批量替换p标签div标签为view标签。然后其他的标签让插件来做。
16. 微信小程序如何实现下拉刷新？
用view代替scroll-view，设置onPullDownRefresh函数实现
17. webview中的页面怎么跳转回小程序？
```js
	wx.miniProgram.navigateTo({
		url:'pages/login/login'+'$params'
	})

	//跳转到小程序导航页面
	
	wx.miniProgram.switchTab({
		url:'/pages/index/index'
	})
```
18.  bindtap和catchtap的区别？
•	相同点：首先他们都是作为点击事件函数，就是点击时触发。在这个作用上他们是一样的，可以不做区分
•	不同点：他们的不同点主要是bindtap是不会阻止冒泡事件的，catchtap是阻值冒泡的
19. 简述五个路由的区别
-	wx.navigateTo()
-	wx.redirectTo()
-	wx.switchTab()
-	wx.navigateBack()
-	wx.reLaunch()
*	在wxml页面中：
o	跳转新页面
o	在当前页打开
o	切换到首页Tab
*	在js页面中：分为‘应用内的页面’和‘tabBar页面’；
*	如果上述跳转遇到跳转失败或者无效的问题，请访问：wx.navigateTo/wx.redirectTo无效
-	wx.navigateTo()：保留当前页面，跳转到应用内的某个页面。但是不能跳到 tabbar 页面 
-	wx.redirectTo()：关闭当前页面，跳转到应用内的某个页面。但是不允许跳转到 tabbar 页面 
-	wx.switchTab()：跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面 
-	wx.navigateBack()关闭当前页面，返回上一页面或多级页面。可通过 getCurrentPages() 获取当前的页面栈，决定需要返回几层 
-	wx.reLaunch()：关闭所有页面，打开到应用内的某个页面
20. 微信小程序与H5的区别？
-	运行环境不同（小程序在微信运行，h5在浏览器运行）；
-	开发成本不同（h5需要兼容不同的浏览器）；
-	获取系统权限不同（系统级权限可以和小程序无缝衔接）；
-	应用在生产环境的运行流畅度（h5需不断对项目优化来提高用户体验）；
21. 小程序如何更新页面中的值 ?
可以通过this.setData来进行改变
22. 如何实现登录数据的持久化 ?
可以通过wx.setStorageSync('键名', 对应的值)来进行数据持久化

23. 微信小程序和app有什么不同之处
微信小程序属于轻量级的app 但是限制在微信中，开发周期短，功能较少，占用空间少,
app就相反 需要占用额外内存 开发周期长
【【我理解的意思相当于flask和django的区别】】
24. 微信小程序如何进行双向绑定
-	通过bind-tap点击事件 向app.js 定义的方法中获取回执
-	设置data的值 实现双向绑定
25.	小程序数据绑定的基础写法及注意事项是什么？ 
答：数据绑定使用 Mustache 语法（双大括号）将变量包起来  注意事项：组件属性、控制属性、关键字，需要写在双引号之内。
26.	ES6中箭头函数this指向什么地方？
答：箭头函数的this继承自父级函数作用域，因此this和父级函数作用域的this指向一致
27.	小程序页面周期函数有哪几个？
答：onLoad: function (options) { }, —— 生命周期函数--监听页面加载
onShow: function () { }, —— 生命周期函数--监听页面显示
    onReady: function () { },——生命周期函数--监听页面初次渲染完成
    onHide: function () { }, —— 生命周期函数--监听页面隐藏
  	onUnload: function () { }, —— 生命周期函数--监听页面卸载  

28.	常见的组件
答：视图容器：view swiper   scroll-view
       基础内容：text  相当于span标签
       媒体：image  video  audio 
       表单：button  input checkbox  label  picker
       画布：canvas
       地图：map
29.	小程序的设置数据和vue哪里不一样？
答：小程序直接this.data的属性是不可以同步到视图的，必须调用：
this.setData({
noBind:true
   	})
app.json是什么文件？包含些什么内容？
答：app.json 是对当前小程序的全局配置，包括了小程序的所有页面路径、界面表现、网络超时时间、底部 tab 等。
30.	小程序中js文件的作用是什么？ 
答: 一个服务仅仅只有界面展示是不够的，还需要和用户做交互：响应用户的点击、获取用户的位置等等。在小程序里边，我们就通过编写 JS 脚本文件来处理用户的操作。

31.	微信小程序中怎么解决事件冒泡问题？ 
答：catch绑定事件即可。               
32.	如何设置微信小程序的缓存？ 
答：wx.setStorage(异步)/wx.setStorageSync(同步)
33.	小程序事件分为哪两类，有什么特点？ 
答：事件分为冒泡事件和非冒泡事件：
冒泡事件：当一个组件上的事件被触发后，该事件会向父节点传递。
非冒泡事件：当一个组件上的事件被触发后，该事件不会向父节点传递。
34.	小程序的文件作用域如何理解？全局数据需要在哪里设置？
答：1）在 JavaScript 文件中声明的变量和函数只在该文件中有效；不同的文件中可以声明相同名字的变量和函数，不会互相影响。
    2）通过全局函数 getApp() 可以获取全局的应用实例，如果需要全局的数据可以在 App() 中设置。
35.	bindtap 事件有什么作用？
答：当用户点击该组件的时候会在该页面对应的Page中找到相应的事件处理函数。

36.	微信小程序中如何从wxml文件中向js文件中传数据？   
答： 三步：1.给要传数据的组件绑定事件，
2.在该组件中设置data-xxx的属性来传数据  
3.在js文件中利用事件的事件对象的data属性即可接收到wxml传递的数据
37.	js中数组有哪些方法，列出四个?  
答：shift()、unshift()、push()、pop()、splice()
38.	微信小程序如何发起网络请求？应该注意什么？content-type 默认值是什么？
答：小程序用wx.request()方法发起网络请求，其中url参数是必填项
微信默认使用content-type是 application/json
用wx.request方法改掉header为x-www-form-urlencoded比较简单 
39.	什么是行内块级元素？  
答：既有行元素的属性即:不会独占一行、又有块元素的属性即：可以设置宽高
40.	微信小程序哪个函数监听下拉刷新？
答：在 Page 中定义 onPullDownRefresh 处理函数，
41.	canvas绘制虚线的方法是什么？
答：.setLineDash
42.	面向对象中构造函数、原型和对象三者之间的关系？
	答：构造函数是用来实例化对象的，而原型中的所有属性都会继承给其对象。
43.	微信小程序自定义组件的使用方法？
答：三步 1.编写组件wxml、wxss、js、json文件  
2.在页面内通过json文件里usingComponents的设置引入组件。 
3.在页面内使用组件
44.	微信小程序中如何做路由（页面跳转）
(1)	navigateTo：保留原页面，跳转新页面
(2)	redirectTo：卸载原页面，跳转新页面
(3)	switchTab：切换tab页，可以实现非tab页向tab页切换
45. wx:for中怎么改变index和item的变量名？ 
  答：使用wx:for-index= “xx” 和 wx:for-item=“xx”
46. 小程序中获取用户信息的api是什么？  
答：wx.getUserInfo

47. es6中的箭头函数的this指向，如果函数体只有返回值return，省略写法是什么？
答：this继承自父级函数作用域 省略写法是 ()=>return xxxx
48. 小程序的app.json文件是用来干什么，包含哪些常用的配置项，列出三个？
答：配置小程序全局样式、页面注册和tab页切换等作用，包含pages、window、tabBar等配置项。
49. 小程序中如何在navigateTo跳转页面的时候传递数据？
答：在url地址后面加上”?+键名=键值” 即可

